#!/usr/bin/env modbuild

SOURCE_URL="ftp://ftp.tcl.tk/pub/tcl/tcl8_6/tk$V-src.tar.gz"

pbuild::configure() {
	case ${OS} in
	Linux )
		srcdir="${MODULE_SRCDIR}/unix"
		;;
	Darwin )
		srcdir="${MODULE_SRCDIR}/macosx"
		C_INCLUDE_PATH+=":/opt/local/include"
		LIBRARY_PATH+=":/opt/local/lib"
		;;
	esac
	"${srcdir}"/configure \
		--prefix="${PREFIX}" \
		--with-tcl=${TCL_PREFIX}/lib \
		--enable-shared=no \
		|| exit 1
}

pbuild::post_install() {
	:
	#{ cd "${PREFIX}"/bin && rm -f tclsh && ln -fs tclsh${V%.*} tclsh; };
}

# use system's cc
declare CC=cc

pbuild::add_to_group 'Programming'
pbuild::set_docfiles 'license.terms' 'README'
pbuild::make_all
