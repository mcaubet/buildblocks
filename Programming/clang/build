#!/usr/bin/env modbuild

pbuild::set_download_url \
	"https://github.com/llvm/llvm-project/releases/download/llvmorg-${V_PKG}/llvm-project-${V_PKG}.src.tar.xz"

pbuild::add_to_group 'Programming'
#pbuild::install_docfiles 'AUTHORS' 'LICENSE' 'NEWS' 'README'


pbuild::configure() {
	cmake \
		-DCMAKE_INSTALL_PREFIX="${PREFIX}" \
		-DCMAKE_BUILD_TYPE=Release \
		-DLLVM_ENABLE_PROJECTS="clang;clang-tools-extra;libunwind;lldb;lld;openmp" \
		-DGCC_INSTALL_PREFIX="${GCC_DIR}" \
		-G "Unix Makefiles" \
		"${SRC_DIR}/llvm" \
		|| exit 1
}

pbuild::post_install() {
	# :FIXME: copy libstdc++ and libgcc from used gcc to $PREFIX/lib64
	:
}
