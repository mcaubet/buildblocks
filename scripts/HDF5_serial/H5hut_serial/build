#!/usr/bin/env modbuild

pbuild::configure() {
	(cd "${MODULE_SRCDIR}" && ./autogen.sh)
	"${MODULE_SRCDIR}"/configure \
		--prefix="${PREFIX}" \
		--enable-debug \
		--enable-vtkconverter \
		--with-hdf5="${HDF5_SERIAL_PREFIX}" \
		--with-pic \
		|| exit 1
}

pbuild::build() {
	make -C src
	make -C tools 
}

pbuild::install() {
	make -C src install
	make -C tools install
}

pbuild::add_to_group 'HDF5_serial'
pbuild::set_runtime_dependencies "${COMPILER}" 'hdf5_serial'
pbuild::set_build_dependencies   "autoconf" "automake" "libtool" "${COMPILER}" "vtk" "hdf5_serial"
pbuild::make_all

